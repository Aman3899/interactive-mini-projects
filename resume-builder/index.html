<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Generator Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- html2pdf.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
        integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Merriweather:wght@400;700&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Lato', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #334155;
            /* Slightly muted dark blue/gray */
            background-color: #f1f5f9;
            /* Lighter gray background */
        }

        /* --- Resume Styling --- */
        .resume-container {
            max-width: 850px;
            /* Standard A4-ish width */
            margin: 2rem auto;
            padding: 3rem;
            background-color: #fff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            border-top: 8px solid #475569;
            /* Slate gray top border */
            position: relative;
            /* For potential absolute elements */
        }

        .resume-header h1 {
            font-family: 'Merriweather', serif;
            font-size: 2.8rem;
            font-weight: 700;
            color: #1e293b;
            /* Darker slate */
            margin-bottom: 0.5rem;
            letter-spacing: -0.5px;
        }

        .resume-header .contact-info p {
            font-size: 0.9rem;
            color: #475569;
            margin-bottom: 0.25rem;
            line-height: 1.6;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0 1rem;
            /* Horizontal gap between items */
        }

        .resume-header .contact-info a {
            color: #3b82f6;
            /* Blue link color */
            text-decoration: none;
            transition: color 0.3s ease, text-decoration 0.3s ease;
        }

        .resume-header .contact-info a:hover {
            color: #1d4ed8;
            /* Darker blue */
            text-decoration: underline;
        }

        .resume-header .contact-info i {
            margin-right: 0.5rem;
            width: 1.1em;
            text-align: center;
            color: #64748b;
            /* Icon color */
        }

        .resume-section h2 {
            font-family: 'Merriweather', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            border-bottom: 2px solid #cbd5e1;
            /* Lighter border */
            padding-bottom: 0.5rem;
            margin-top: 2rem;
            margin-bottom: 1.25rem;
            letter-spacing: 0.5px;
        }

        .resume-entry {
            margin-bottom: 1.5rem;
            break-inside: avoid;
            /* Try to prevent breaking inside entry for PDF */
        }

        .resume-entry .title-line {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            flex-wrap: wrap;
            margin-bottom: 0.3rem;
        }

        .resume-entry h3 {
            font-size: 1.15rem;
            font-weight: 700;
            color: #1e293b;
        }

        .resume-entry .company,
        .resume-entry .institution {
            font-size: 1.05rem;
            font-weight: 400;
            /* Normal weight */
            color: #475569;
            margin-bottom: 0.3rem;
        }

        .resume-entry .company i,
        .resume-entry .institution i {
            margin-right: 0.4rem;
            font-size: 0.9em;
            color: #64748b;
        }

        .resume-entry .date-location {
            font-size: 0.9rem;
            font-style: italic;
            color: #64748b;
            text-align: right;
            flex-shrink: 0;
            margin-left: 1.5rem;
        }

        .resume-entry .tech-links {
            font-size: 0.9rem;
            font-weight: 400;
            color: #475569;
            margin-bottom: 0.5rem;
        }

        .resume-entry .tech-links strong {
            font-weight: 700;
            color: #334155;
        }

        .resume-entry .tech-links a {
            color: #3b82f6;
            text-decoration: none;
            margin-left: 0.6rem;
            font-weight: 400;
        }

        .resume-entry .tech-links a:hover {
            text-decoration: underline;
        }

        .resume-entry .tech-links i {
            margin-right: 0.3rem;
            font-size: 0.9em;
        }

        .resume-entry ul {
            list-style: none;
            padding-left: 0;
            /* Reset default */
            margin-top: 0.6rem;
        }

        .resume-entry li {
            position: relative;
            padding-left: 1.5rem;
            /* Space for custom bullet */
            margin-bottom: 0.4rem;
            color: #334155;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .resume-entry li::before {
            content: '–';
            /* En dash for a cleaner look */
            position: absolute;
            left: 0.25rem;
            top: 0px;
            color: #64748b;
            font-weight: bold;
            font-size: 1rem;
        }

        /* Specific list styling for Awards/Certifications */
        .resume-section>ul {
            list-style: none;
            padding-left: 0;
            margin-top: 0.6rem;
        }

        .resume-section>ul>li {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.4rem;
            color: #334155;
            font-size: 0.95rem;
            line-height: 1.6;
            break-inside: avoid;
        }

        .resume-section>ul>li::before {
            content: '▪';
            /* Square bullet */
            position: absolute;
            left: 0.25rem;
            top: 1px;
            color: #64748b;
            font-size: 0.8rem;
        }


        .coursework-columns {
            padding-left: 0;
            margin-top: 0.6rem;
            columns: 3;
            column-gap: 2rem;
        }

        .coursework-columns li {
            font-size: 0.95rem;
            color: #334155;
            margin-bottom: 0.3rem;
            break-inside: avoid-column;
            position: relative;
            padding-left: 1rem;
            list-style: none;
        }

        .coursework-columns li::before {
            content: '•';
            position: absolute;
            left: 0;
            top: 3px;
            font-size: 0.7rem;
            color: #64748b;
        }

        .skills-section p {
            margin-bottom: 0.6rem;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .skills-section strong {
            color: #1e293b;
            font-weight: 700;
            display: inline-block;
            min-width: 180px;
            /* Align skill categories */
        }

        /* --- Form Styling --- */
        .form-container {
            border-top: 6px solid #3b82f6;
            /* Blue top border for form */
        }

        .form-section {
            margin-bottom: 2.5rem;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 2rem;
        }

        .form-section:last-of-type {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 1rem;
        }

        .form-section h3 {
            font-family: 'Merriweather', serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 700;
            /* Bold labels */
            color: #475569;
            font-size: 0.9rem;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="url"],
        input[type="date"],
        /* Keep date for consistency if needed */
        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.375rem;
            font-size: 0.95rem;
            margin-bottom: 1rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: #f8fafc;
            /* Very light input bg */
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
            background-color: #fff;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
            line-height: 1.6;
        }

        .add-btn,
        .remove-btn {
            background-color: #22c55e;
            /* Green */
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s ease, transform 0.1s ease;
            margin-top: 0.5rem;
            display: inline-flex;
            /* Align icon and text */
            align-items: center;
            gap: 0.4rem;
        }

        .add-btn i,
        .remove-btn i {
            font-size: 0.9em;
        }

        .remove-btn {
            background-color: #ef4444;
            /* Red */
            margin-left: 0.5rem;
        }

        .add-btn:hover {
            background-color: #16a34a;
        }

        .remove-btn:hover {
            background-color: #dc2626;
        }

        .add-btn:active,
        .remove-btn:active {
            transform: scale(0.98);
        }

        .dynamic-entry {
            border: 1px dashed #cbd5e1;
            /* Dashed border */
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 0.5rem;
            position: relative;
            background-color: #f8fafc;
            /* Slightly off-white background */
        }

        .dynamic-entry .remove-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            padding: 0.3rem 0.6rem;
            /* Smaller remove button */
            font-size: 0.75rem;
        }

        /* --- Button Styling --- */
        .action-button,
        .toggle-button,
        .download-button {
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s ease, transform 0.1s ease;
            margin: 0.5rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .action-button i,
        .toggle-button i,
        .download-button i {
            font-size: 1.1em;
        }

        .action-button {
            background-color: #3b82f6;
            /* Blue */
        }

        .action-button:hover {
            background-color: #2563eb;
        }

        .toggle-button {
            background-color: #64748b;
            /* Slate */
        }

        .toggle-button:hover {
            background-color: #475569;
        }

        .download-button {
            background-color: #10b981;
            /* Emerald Green */
        }

        .download-button:hover {
            background-color: #059669;
        }

        .action-button:active,
        .toggle-button:active,
        .download-button:active {
            transform: scale(0.98);
        }

        .output-controls {
            text-align: center;
            margin-top: -1rem;
            /* Pull up slightly */
            margin-bottom: 2rem;
        }


        @media (max-width: 768px) {
            .resume-container {
                padding: 2rem;
            }

            .resume-header h1 {
                font-size: 2.2rem;
            }

            .resume-section h2 {
                font-size: 1.3rem;
            }

            .skills-section strong {
                min-width: 120px;
            }

            .coursework-columns {
                columns: 2;
            }
        }

        @media (max-width: 500px) {
            body {
                font-size: 15px;
            }

            /* Slightly smaller base font */
            .resume-container {
                padding: 1.5rem;
                margin: 1rem;
            }

            .resume-header h1 {
                font-size: 1.8rem;
            }

            .resume-header .contact-info p {
                font-size: 0.85rem;
                gap: 0 0.5rem;
                justify-content: flex-start;
            }

            .resume-header .contact-info span {
                display: block;
                width: 100%;
                margin-bottom: 0.2rem;
            }

            /* Stack contacts */
            .resume-header .contact-info p:first-child span:not(:last-child)::after,
            .resume-header .contact-info p:last-child span:not(:last-child)::after {
                content: "";
                /* Remove '|' on mobile */
            }

            .resume-section h2 {
                font-size: 1.2rem;
            }

            .resume-entry .title-line {
                flex-direction: column;
                align-items: flex-start;
            }

            .resume-entry .date-location {
                text-align: left;
                margin-left: 0;
                margin-top: 0.3rem;
                font-size: 0.85rem;
            }

            .coursework-columns {
                columns: 1;
            }

            .skills-section strong {
                display: block;
                margin-bottom: 0.2rem;
                min-width: auto;
            }

            .form-container {
                padding: 1.5rem;
            }

            label {
                font-size: 0.85rem;
            }

            input,
            textarea {
                padding: 0.6rem;
                font-size: 0.9rem;
            }

            .action-button,
            .toggle-button,
            .download-button {
                font-size: 0.9rem;
                padding: 0.6rem 1.2rem;
            }
        }

        /* Print specific styles (applied by html2pdf) */
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }

            /* Ensure colors print */
            .resume-container {
                box-shadow: none;
                border-top: 8px solid #475569;
                margin: 0;
                max-width: 100%;
            }

            .no-print {
                display: none;
            }

            /* Class to hide elements in PDF */
            /* Add more print-specific adjustments if needed */
        }
    </style>
</head>

<body class="bg-gray-100">

    <div class="text-center my-8 no-print">
        <button id="show-sample-btn" class="toggle-button"><i class="fas fa-eye"></i> View Sample</button>
        <button id="show-form-btn" class="toggle-button"><i class="fas fa-edit"></i> Create New</button>
    </div>

    {/* --- Sample Resume Viewer (Initially Visible) --- */}
    <div id="sample-viewer" class="resume-container">
        {/* ... (Keep the sample resume content exactly as before) ... */}
        <header class="resume-header text-center mb-6">
            <h1>John Doe</h1>
            <div class="contact-info mt-2">
                <p>
                    <span class="inline-block"><i class="fas fa-map-marker-alt"></i>Sample City, Country</span>
                    <span class="inline-block"><i class="fas fa-phone"></i><a href="tel:+1234567890">+1 (234)
                            567-890</a></span>
                    <span class="inline-block"><i class="fas fa-envelope"></i><a
                            href="mailto:john.doe@email.com">john.doe@email.com</a></span>
                </p>
                <p>
                    <span class="inline-block"><i class="fab fa-linkedin"></i><a href="https://linkedin.com/in/johndoe"
                            target="_blank">linkedin.com/in/johndoe</a></span>
                    <span class="inline-block"><i class="fas fa-briefcase"></i><a href="https://portfolio.johndoe.com"
                            target="_blank">portfolio.johndoe.com</a></span>
                    <span class="inline-block"><i class="fab fa-github"></i><a href="https://github.com/johndoe"
                            target="_blank">github.com/johndoe</a></span>
                </p>
            </div>
        </header>

        <section class="resume-section">
            <h2>Education</h2>
            <div class="resume-entry">
                <div class="title-line">
                    <h3>Bachelor of Science in Computer Science</h3>
                    <span class="date-location">Sep 2020 - May 2024</span>
                </div>
                <p class="institution"><i class="fas fa-university"></i>University of Example, Sample City</p>
                <p class="text-sm text-gray-600">CGPA: 3.8 / 4.0</p>
            </div>
            <div class="resume-entry">
                <div class="title-line">
                    <h3>High School Diploma (Pre-Engineering)</h3>
                    <span class="date-location">Aug 2018 - May 2020</span>
                </div>
                <p class="institution"><i class="fas fa-school"></i>Sample College, Sample City</p>
            </div>
        </section>

        <section class="resume-section">
            <h2>Relevant Coursework</h2>
            <ul class="coursework-columns">
                <li>Programming Fundamentals</li>
                <li>Object-Oriented Programming</li>
                <li>Data Structures & Algorithms</li>
                <li>Database Management Systems</li>
                <li>Operating Systems</li>
                <li>Computer Networks</li>
                <li>Formal Methods</li>
                <li>Software Design & Analysis</li>
                <li>Web Development</li>
                <li>Android Development</li>
                <li>Software Testing</li>
                <li>Artificial Intelligence</li>
            </ul>
        </section>

        <section class="resume-section">
            <h2>Experience</h2>
            <div class="resume-entry">
                <div class="title-line">
                    <h3>Software Engineer Intern</h3>
                    <span class="date-location">Jun 2023 - Aug 2023</span>
                </div>
                <p class="company"><i class="fas fa-building"></i>Tech Solutions Inc. | <i
                        class="fas fa-map-marker-alt"></i>Remote</p>
                <ul>
                    <li>Developed and maintained features for a large-scale web application using React, Node.js, and
                        PostgreSQL.</li>
                    <li>Collaborated with senior engineers on code reviews, testing, and deployment processes, improving
                        code quality by 15%.</li>
                    <li>Assisted in debugging and resolving issues, reducing critical bugs reported by 20%.</li>
                    <li>Participated in Agile ceremonies (sprints, stand-ups) and contributed to team planning.</li>
                </ul>
            </div>
            <div class="resume-entry">
                <div class="title-line">
                    <h3>Freelance Web Developer</h3>
                    <span class="date-location">Jan 2023 - Present</span>
                </div>
                <p class="company"><i class="fas fa-user-tie"></i>Self-Employed | <i
                        class="fas fa-map-marker-alt"></i>Remote</p>
                <ul>
                    <li>Built custom websites and web applications for small businesses using WordPress, PHP, and modern
                        frontend frameworks (React/Vue).</li>
                    <li>Managed client communication, project requirements, and delivery timelines, ensuring high client
                        satisfaction.</li>
                    <li>Provided ongoing maintenance and support for deployed websites.</li>
                </ul>
            </div>
        </section>

        <section class="resume-section">
            <h2>Projects</h2>
            <div class="resume-entry">
                <div class="title-line">
                    <h3>AI Health Assistant (Conceptual)</h3>
                    <span class="date-location">2024</span>
                </div>
                <p class="tech-links"><strong>Tech:</strong> Python, AI/ML Libraries, NLP
                    <a href="#" target="_blank"><i class="fas fa-link"></i> Preview</a>
                </p>
                <ul>
                    <li>Conceptualized an AI tool for analyzing medical conversations (multi-lingual) and generating
                        accurate summaries.</li>
                    <li>Researched techniques for improving clinical documentation efficiency.</li>
                </ul>
            </div>
            <div class="resume-entry">
                <div class="title-line">
                    <h3>Algo Visualizer</h3>
                    <span class="date-location">2023</span>
                </div>
                <p class="tech-links"><strong>Tech:</strong> React, JavaScript, CSS Animations
                    <a href="#" target="_blank"><i class="fas fa-desktop"></i> Live Demo</a>
                </p>
                <ul>
                    <li>Developed an interactive platform visualizing common sorting and searching algorithms.</li>
                    <li>Implemented real-time animation controls for speed and step-through debugging.</li>
                </ul>
            </div>
            <div class="resume-entry">
                <div class="title-line">
                    <h3>E-Commerce Platform (Sample)</h3>
                    <span class="date-location">2023</span>
                </div>
                <p class="tech-links"><strong>Tech:</strong> Next.js, Node.js, MongoDB, Socket.IO
                    <a href="#" target="_blank"><i class="fab fa-github"></i> GitHub</a>
                </p>
                <ul>
                    <li>Created a full-stack e-commerce site featuring real-time product listings and secure user chat.
                    </li>
                    <li>Focused on creating a seamless and responsive user experience across devices.</li>
                </ul>
            </div>
        </section>

        <section class="resume-section">
            <h2>Technical Skills</h2>
            <div class="skills-section">
                <p><strong>Languages:</strong> C++, Java, Python, JavaScript (ES6+), HTML5, CSS3, SQL, Haskell (Basic),
                    C# (Basic)</p>
                <p><strong>Frameworks/Libraries:</strong> React, Next.js, Node.js, Express.js, MERN Stack, Tailwind CSS,
                    Flutter (Basic), JWT, REST APIs</p>
                <p><strong>Databases:</strong> MySQL, MongoDB, PostgreSQL (Basic)</p>
                <p><strong>Developer Tools:</strong> VS Code, Git, Docker (Basic), Android Studio, MySQL Workbench,
                    Postman, Jira</p>
            </div>
        </section>

        <section class="resume-section">
            <h2>Awards</h2>
            <ul>
                <li>Dean's Honor List (Multiple Semesters) - University of Example</li>
                <li>Top Project Award - Senior Design Expo 2024</li>
                <li>Academic Excellence Scholarship - 2021, 2022</li>
            </ul>
        </section>

        <section class="resume-section">
            <h2>Activities</h2>
            <div class="resume-entry">
                <div class="title-line">
                    <h3>Teaching Assistant (Computer Science Dept.)</h3>
                    <span class="date-location">2022 - 2023</span>
                </div>
                <p class="institution"><i class="fas fa-chalkboard-teacher"></i>University of Example</p>
                <ul>
                    <li>Assisted professors in introductory programming and data structures courses.</li>
                    <li>Led lab sessions and provided tutoring to 100+ undergraduate students.</li>
                </ul>
            </div>
            <div class="resume-entry">
                <div class="title-line">
                    <h3>Member, Coding Club</h3>
                    <span class="date-location">2021 - Present</span>
                </div>
                <p class="institution"><i class="fas fa-laptop-code"></i>University of Example</p>
                <ul>
                    <li>Participated in competitive programming contests and workshops.</li>
                    <li>Organized introductory Python workshop for freshman students.</li>
                </ul>
            </div>
        </section>

        <section class="resume-section">
            <h2>Certifications</h2>
            <ul>
                <li>Completed certifications in Web Development and JavaScript Algorithms - freeCodeCamp (2023)</li>
                <li>AWS Certified Cloud Practitioner - Amazon Web Services (2024)</li>
            </ul>
        </section>
    </div>

    {/* --- Resume Builder Form (Initially Hidden) --- */}
    <div id="form-container" class="resume-container form-container hidden">
        <h2 class="text-2xl font-bold mb-8 text-center text-gray-700">Create Your Resume</h2>
        <form id="resume-form">

            {/* Personal Information */}
            <section class="form-section">
                <h3><i class="fas fa-user-circle mr-2 text-blue-500"></i>Personal Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6"> {/* Changed gap to gap-x */}
                    <div><label for="fullName">Full Name:</label><input type="text" id="fullName" name="fullName"
                            placeholder="e.g., Jane Smith" required></div>
                    <div><label for="location">Location:</label><input type="text" id="location" name="location"
                            placeholder="e.g., San Francisco, CA"></div>
                    <div><label for="phone">Phone:</label><input type="tel" id="phone" name="phone"
                            placeholder="e.g., +1 (555) 123-4567"></div>
                    <div><label for="email">Email:</label><input type="email" id="email" name="email"
                            placeholder="e.g., jane.smith@email.com" required></div>
                    <div><label for="linkedin">LinkedIn URL:</label><input type="url" id="linkedin" name="linkedin"
                            placeholder="https://linkedin.com/in/yourprofile"></div>
                    <div><label for="portfolio">Portfolio/Website URL:</label><input type="url" id="portfolio"
                            name="portfolio" placeholder="https://yourportfolio.com"></div>
                    <div><label for="github">GitHub URL:</label><input type="url" id="github" name="github"
                            placeholder="https://github.com/yourusername"></div>
                    <div><label for="otherLink">Other Link (Optional):</label><input type="url" id="otherLink"
                            name="otherLink" placeholder="e.g., Blog, Twitter"></div>
                </div>
            </section>

            {/* Education */}
            <section class="form-section">
                <h3><i class="fas fa-graduation-cap mr-2 text-blue-500"></i>Education</h3>
                <div id="education-entries">
                    {/* Template */}
                    <div class="dynamic-entry education-entry">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6">
                            <div><label>Institution Name:</label><input type="text" name="eduInstitution"
                                    placeholder="e.g., Stanford University" required></div>
                            <div><label>Degree/Program:</label><input type="text" name="eduDegree"
                                    placeholder="e.g., B.S. in Computer Science" required></div>
                            <div><label>Start Date:</label><input type="text" name="eduStartDate"
                                    placeholder="e.g., Sep 2020"></div>
                            <div><label>End Date:</label><input type="text" name="eduEndDate"
                                    placeholder="e.g., May 2024 or Present" required></div>
                            <div><label>Location:</label><input type="text" name="eduLocation"
                                    placeholder="e.g., Stanford, CA"></div>
                            <div><label>GPA/Grade (Optional):</label><input type="text" name="eduGpa"
                                    placeholder="e.g., 3.9 / 4.0"></div>
                        </div>
                        <button type="button" class="remove-btn"><i class="fas fa-times"></i> Remove</button>
                    </div>
                </div>
                <button type="button" id="add-education-btn" class="add-btn"><i class="fas fa-plus"></i> Add
                    Education</button>
            </section>

            {/* Coursework */}
            <section class="form-section">
                <h3><i class="fas fa-book-open mr-2 text-blue-500"></i>Relevant Coursework</h3>
                <label for="coursework">List relevant courses (comma-separated):</label>
                <textarea id="coursework" name="coursework" rows="3"
                    placeholder="e.g., Data Structures, Algorithms, Web Development, Database Systems, AI..."></textarea>
            </section>

            {/* Experience */}
            <section class="form-section">
                <h3><i class="fas fa-briefcase mr-2 text-blue-500"></i>Experience</h3>
                <div id="experience-entries">
                    {/* Template */}
                    <div class="dynamic-entry experience-entry">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6">
                            <div><label>Job Title:</label><input type="text" name="expTitle"
                                    placeholder="e.g., Software Engineer Intern" required></div>
                            <div><label>Company Name:</label><input type="text" name="expCompany"
                                    placeholder="e.g., Google" required></div>
                            <div><label>Location:</label><input type="text" name="expLocation"
                                    placeholder="e.g., Mountain View, CA or Remote"></div>
                            <div><label>Start Date:</label><input type="text" name="expStartDate"
                                    placeholder="e.g., Jun 2023" required></div>
                            <div><label>End Date:</label><input type="text" name="expEndDate"
                                    placeholder="e.g., Aug 2023 or Present" required></div>
                        </div>
                        <label>Responsibilities/Achievements (one per line, start with '-' if desired):</label>
                        <textarea name="expDesc" rows="5" placeholder="- Developed feature X using React, resulting in a 15% performance increase.
- Collaborated with a team of 5 to deliver project Y ahead of schedule.
- Wrote unit tests achieving 90% code coverage."></textarea>
                        <button type="button" class="remove-btn"><i class="fas fa-times"></i> Remove</button>
                    </div>
                </div>
                <button type="button" id="add-experience-btn" class="add-btn"><i class="fas fa-plus"></i> Add
                    Experience</button>
            </section>

            {/* Projects */}
            <section class="form-section">
                <h3><i class="fas fa-project-diagram mr-2 text-blue-500"></i>Projects</h3>
                <div id="project-entries">
                    {/* Template */}
                    <div class="dynamic-entry project-entry">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6">
                            <div><label>Project Name:</label><input type="text" name="projName"
                                    placeholder="e.g., Personal Portfolio Website" required></div>
                            <div><label>Technologies Used:</label><input type="text" name="projTech"
                                    placeholder="e.g., React, Tailwind CSS, Node.js"></div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-x-6">
                            <div><label>Year:</label><input type="text" name="projYear" placeholder="e.g., 2024"></div>
                            <div><label>Live Demo URL:</label><input type="url" name="projDemoUrl"
                                    placeholder="https://..."></div>
                            <div><label>GitHub URL:</label><input type="url" name="projGithubUrl"
                                    placeholder="https://github.com/..."></div>
                        </div>
                        <label>Description/Features (one point per line):</label>
                        <textarea name="projDesc" rows="4" placeholder="- Built a responsive UI with React.
- Integrated a Node.js backend for a contact form.
- Deployed using Vercel."></textarea>
                        <button type="button" class="remove-btn"><i class="fas fa-times"></i> Remove</button>
                    </div>
                </div>
                <button type="button" id="add-project-btn" class="add-btn"><i class="fas fa-plus"></i> Add
                    Project</button>
            </section>

            {/* Technical Skills */}
            <section class="form-section">
                <h3><i class="fas fa-cogs mr-2 text-blue-500"></i>Technical Skills</h3>
                <div><label for="languages">Programming Languages:</label><input type="text" id="languages"
                        name="languages" placeholder="e.g., Python, JavaScript, Java, C++, SQL"></div>
                <div><label for="frameworks">Frameworks/Libraries/Tech:</label><input type="text" id="frameworks"
                        name="frameworks"
                        placeholder="e.g., React, Node.js, Express, Spring Boot, TensorFlow, Docker, AWS"></div>
                <div><label for="databases">Databases:</label><input type="text" id="databases" name="databases"
                        placeholder="e.g., PostgreSQL, MongoDB, MySQL, Redis"></div>
                <div><label for="tools">Developer Tools:</label><input type="text" id="tools" name="tools"
                        placeholder="e.g., Git, VS Code, Jira, Postman, Jenkins"></div>
            </section>

            {/* Awards */}
            <section class="form-section">
                <h3><i class="fas fa-award mr-2 text-blue-500"></i>Awards</h3>
                <label for="awards">List awards (one per line):</label>
                <textarea id="awards" name="awards" rows="3" placeholder="e.g., Dean's List (Fall 2023, Spring 2024)
Winner, University Hackathon 2023"></textarea>
            </section>

            {/* Activities */}
            <section class="form-section">
                <h3><i class="fas fa-users mr-2 text-blue-500"></i>Activities / Extracurriculars</h3>
                <div id="activity-entries">
                    {/* Template */}
                    <div class="dynamic-entry activity-entry">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6">
                            <div><label>Role/Title:</label><input type="text" name="actTitle"
                                    placeholder="e.g., President, Member, Volunteer" required></div>
                            <div><label>Organization/Group:</label><input type="text" name="actOrg"
                                    placeholder="e.g., Coding Club, ACM Chapter"></div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6">
                            <div><label>Start Date:</label><input type="text" name="actStartDate"
                                    placeholder="e.g., Sep 2021"></div>
                            <div><label>End Date:</label><input type="text" name="actEndDate"
                                    placeholder="e.g., May 2024 or Present"></div>
                        </div>
                        <label>Description (optional, one point per line):</label>
                        <textarea name="actDesc" rows="3" placeholder="- Organized weekly coding workshops.
- Managed club budget and events."></textarea>
                        <button type="button" class="remove-btn"><i class="fas fa-times"></i> Remove</button>
                    </div>
                </div>
                <button type="button" id="add-activity-btn" class="add-btn"><i class="fas fa-plus"></i> Add
                    Activity</button>
            </section>

            {/* Certifications */}
            <section class="form-section">
                <h3><i class="fas fa-certificate mr-2 text-blue-500"></i>Certifications</h3>
                <label for="certifications">List relevant certifications (one per line):</label>
                <textarea id="certifications" name="certifications" rows="3" placeholder="e.g., AWS Certified Solutions Architect - Associate (2024)
Google Professional Cloud Architect (2023)"></textarea>
            </section>

            <div class="text-center">
                <button type="submit" id="generate-btn" class="action-button"><i class="fas fa-file-alt"></i> Generate
                    Resume</button>
            </div>
        </form>
    </div>

    {/* --- Generated Resume Output Area --- */}
    <div id="generated-output-area" class="hidden">
        <div class="output-controls no-print">
            <button id="download-pdf-btn" class="download-button"><i class="fas fa-file-pdf"></i> Download PDF</button>
        </div>
        <div id="generated-resume-output">
            {/* Generated HTML will be injected here inside its own container */}
        </div>
    </div>


    <script>
        const sampleViewer = document.getElementById('sample-viewer');
        const formContainer = document.getElementById('form-container');
        const generatedOutputArea = document.getElementById('generated-output-area');
        const generatedOutputContainer = document.getElementById('generated-resume-output');
        const showSampleBtn = document.getElementById('show-sample-btn');
        const showFormBtn = document.getElementById('show-form-btn');
        const resumeForm = document.getElementById('resume-form');
        const downloadPdfBtn = document.getElementById('download-pdf-btn');

        let generatedFullName = 'Resume'; // For PDF filename

        // --- View Toggling ---
        function showView(viewToShow) {
            [sampleViewer, formContainer, generatedOutputArea].forEach(view => {
                if (view === viewToShow) {
                    view.classList.remove('hidden');
                } else {
                    view.classList.add('hidden');
                }
            });
            if (viewToShow !== generatedOutputArea) {
                generatedOutputContainer.innerHTML = ''; // Clear previous generation if switching away
                generatedFullName = 'Resume'; // Reset filename
            }
            window.scrollTo(0, 0); // Scroll to top
        }

        showSampleBtn.addEventListener('click', () => showView(sampleViewer));
        showFormBtn.addEventListener('click', () => showView(formContainer));

        // --- Dynamic Entry Addition/Removal ---
        function setupDynamicSections(entriesContainerId, addButtonId, entryClass) {
            const entriesContainer = document.getElementById(entriesContainerId);
            const addButton = document.getElementById(addButtonId);
            const templateEntryHTML = entriesContainer.querySelector(`.${entryClass}`)?.outerHTML; // Get HTML of the template

            if (!templateEntryHTML) {
                console.error(`Template entry ".${entryClass}" not found in "#${entriesContainerId}"`);
                return;
            }

            // Setup remove buttons for existing (template) entries
            entriesContainer.querySelectorAll(`.${entryClass} .remove-btn`).forEach(btn => {
                setupRemoveButton(btn, entryClass);
            });

            addButton?.addEventListener('click', () => {
                // Create new entry from template HTML
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = templateEntryHTML;
                const newEntry = tempDiv.firstElementChild;

                // Clear input values
                newEntry.querySelectorAll('input, textarea').forEach(input => input.value = '');

                // Setup its remove button
                const removeBtn = newEntry.querySelector('.remove-btn');
                if (removeBtn) setupRemoveButton(removeBtn, entryClass);

                entriesContainer.appendChild(newEntry);
            });
        }

        function setupRemoveButton(button, entryClass) {
            button.addEventListener('click', (e) => {
                const entryToRemove = e.target.closest(`.${entryClass}`);
                if (entryToRemove) {
                    entryToRemove.remove();
                }
            });
        }

        setupDynamicSections('education-entries', 'add-education-btn', 'education-entry');
        setupDynamicSections('experience-entries', 'add-experience-btn', 'experience-entry');
        setupDynamicSections('project-entries', 'add-project-btn', 'project-entry');
        setupDynamicSections('activity-entries', 'add-activity-btn', 'activity-entry');


        // --- Helper Functions for HTML Generation ---
        function sanitize(str) {
            // Basic sanitization to prevent simple HTML injection
            if (!str) return '';
            return str.replace(/</g, "<").replace(/>/g, ">");
        }

        function formatLink(url, iconClass, linkTextOverride = null) {
            if (!url || typeof url !== 'string' || !url.trim()) return '';
            let cleanUrl = url.trim();
            let displayUrl = linkTextOverride || cleanUrl.replace(/^(https?:\/\/)?(www\.)?/, '').replace(/\/$/, ''); // Remove protocol/www./trailing slash for display

            // Ensure URL has a protocol for the href
            if (!cleanUrl.startsWith('http://') && !cleanUrl.startsWith('https://') && !cleanUrl.startsWith('mailto:') && !cleanUrl.startsWith('tel:')) {
                // Basic check if it looks like an email or phone
                if (cleanUrl.includes('@')) {
                    cleanUrl = `mailto:${cleanUrl}`;
                } else if (cleanUrl.match(/^[\d\s()+-]+$/)) { // Simple phone number check
                    cleanUrl = `tel:${cleanUrl.replace(/[^\d+]/g, '')}`; // Clean for tel:
                } else {
                    cleanUrl = `https://${cleanUrl}`; // Default to https
                }
            }

            // Determine icon class automatically if not provided
            let autoIconClass = iconClass;
            if (!autoIconClass) {
                if (cleanUrl.startsWith('mailto:')) autoIconClass = 'fas fa-envelope';
                else if (cleanUrl.startsWith('tel:')) autoIconClass = 'fas fa-phone';
                else if (cleanUrl.includes('linkedin.com')) autoIconClass = 'fab fa-linkedin';
                else if (cleanUrl.includes('github.com')) autoIconClass = 'fab fa-github';
                else autoIconClass = 'fas fa-link'; // Default link icon
            }


            return `<span class="inline-block"><i class="${autoIconClass}"></i><a href="${sanitize(cleanUrl)}" target="_blank">${sanitize(displayUrl)}</a></span>`;
        }

        function createListHTML(text) {
            if (!text || !text.trim()) return '';
            const items = text.split('\n')
                .map(item => item.trim().replace(/^- /, '')) // Remove leading hyphen + space
                .filter(item => item); // Remove empty lines
            if (items.length === 0) return '';
            return `<ul>${items.map(item => `<li>${sanitize(item)}</li>`).join('')}</ul>`;
        }

        // --- Resume Generation ---
        resumeForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(resumeForm);
            const data = {};

            // --- Collect Form Data ---
            ['fullName', 'location', 'phone', 'email', 'linkedin', 'portfolio', 'github', 'otherLink',
                'coursework', 'languages', 'frameworks', 'databases', 'tools', 'awards', 'certifications']
                .forEach(key => data[key] = formData.get(key)?.trim() || '');

            generatedFullName = data.fullName || 'Resume'; // Update for PDF filename

            // Helper to get dynamic entries
            function getDynamicEntries(containerId, fieldNames) {
                const entries = [];
                const entryElements = document.querySelectorAll(`#${containerId} .dynamic-entry`);
                entryElements.forEach(entry => {
                    const entryData = {};
                    let isEmpty = true;
                    fieldNames.forEach(fieldName => {
                        const input = entry.querySelector(`[name=${fieldName}]`);
                        entryData[fieldName] = input ? input.value.trim() : '';
                        if (entryData[fieldName]) isEmpty = false;
                    });
                    // Only add if *any* required field has value (adjust based on your needs)
                    // For simplicity, let's add if any field has a value.
                    if (!isEmpty) {
                        entries.push(entryData);
                    }
                });
                return entries;
            }

            data.education = getDynamicEntries('education-entries', ['eduInstitution', 'eduDegree', 'eduStartDate', 'eduEndDate', 'eduLocation', 'eduGpa']);
            data.experience = getDynamicEntries('experience-entries', ['expTitle', 'expCompany', 'expLocation', 'expStartDate', 'expEndDate', 'expDesc']);
            data.projects = getDynamicEntries('project-entries', ['projName', 'projTech', 'projYear', 'projDemoUrl', 'projGithubUrl', 'projDesc']);
            data.activities = getDynamicEntries('activity-entries', ['actTitle', 'actOrg', 'actStartDate', 'actEndDate', 'actDesc']);


            // --- Build HTML ---
            let html = `<div class="resume-container">`; // Start with the container class

            // Header
            html += `
                <header class="resume-header text-center mb-8">
                    <h1>${sanitize(data.fullName) || 'Your Name'}</h1>
                    <div class="contact-info mt-3">`; // Increased margin top
            // Contact Row 1
            const contact1 = [
                data.location ? `<span class="inline-block"><i class="fas fa-map-marker-alt"></i>${sanitize(data.location)}</span>` : '',
                formatLink(data.phone, 'fas fa-phone'),
                formatLink(data.email, 'fas fa-envelope')
            ].filter(Boolean).join(''); // Filter out empty strings and join
            if (contact1) html += `<p>${contact1}</p>`;

            // Contact Row 2
            const contact2 = [
                formatLink(data.linkedin, 'fab fa-linkedin'),
                formatLink(data.portfolio, 'fas fa-briefcase', 'Portfolio'), // Override text for portfolio
                formatLink(data.github, 'fab fa-github'),
                formatLink(data.otherLink, 'fas fa-link', 'Other Link') // Override text for other link
            ].filter(Boolean).join('');
            if (contact2) html += `<p>${contact2}</p>`;

            html += `</div></header>`;

            // Education
            if (data.education.length > 0) {
                html += `<section class="resume-section"><h2>Education</h2>`;
                data.education.forEach(edu => {
                    html += `
                        <div class="resume-entry">
                            <div class="title-line">
                                <h3>${sanitize(edu.eduDegree) || 'Degree/Program'}</h3>
                                <span class="date-location">${sanitize(edu.eduStartDate) || ''} ${edu.eduEndDate ? ` - ${sanitize(edu.eduEndDate)}` : ''}</span>
                            </div>
                            <p class="institution"><i class="fas fa-university"></i>${sanitize(edu.eduInstitution) || 'Institution'} ${edu.eduLocation ? `| ${sanitize(edu.eduLocation)}` : ''}</p>
                            ${edu.eduGpa ? `<p class="text-sm text-gray-600 italic">GPA: ${sanitize(edu.eduGpa)}</p>` : ''}
                        </div>`;
                });
                html += `</section>`;
            }

            // Coursework
            if (data.coursework) {
                const courses = data.coursework.split(',').map(c => sanitize(c.trim())).filter(c => c);
                if (courses.length > 0) {
                    html += `<section class="resume-section"><h2>Relevant Coursework</h2><ul class="coursework-columns">`;
                    courses.forEach(course => html += `<li>${course}</li>`);
                    html += `</ul></section>`;
                }
            }

            // Experience
            if (data.experience.length > 0) {
                html += `<section class="resume-section"><h2>Experience</h2>`;
                data.experience.forEach(exp => {
                    html += `
                        <div class="resume-entry">
                            <div class="title-line">
                                <h3>${sanitize(exp.expTitle) || 'Job Title'}</h3>
                                <span class="date-location">${sanitize(exp.expStartDate) || ''} ${exp.expEndDate ? ` - ${sanitize(exp.expEndDate)}` : ''}</span>
                            </div>
                            <p class="company"><i class="fas fa-building"></i>${sanitize(exp.expCompany) || 'Company'} ${exp.expLocation ? `| <i class="fas fa-map-marker-alt"></i> ${sanitize(exp.expLocation)}` : ''}</p>
                            ${createListHTML(exp.expDesc)}
                        </div>`;
                });
                html += `</section>`;
            }

            // Projects
            if (data.projects.length > 0) {
                html += `<section class="resume-section"><h2>Projects</h2>`;
                data.projects.forEach(proj => {
                    const techDisplay = proj.projTech ? `<p class="tech-links"><strong>Tech:</strong> ${sanitize(proj.projTech)}` : '<p class="tech-links">';
                    const links = [
                        formatLink(proj.projDemoUrl, 'fas fa-desktop', 'Live Demo'),
                        formatLink(proj.projGithubUrl, 'fab fa-github', 'GitHub')
                    ].filter(Boolean).join('');

                    html += `
                        <div class="resume-entry">
                            <div class="title-line">
                                <h3>${sanitize(proj.projName) || 'Project Name'}</h3>
                                <span class="date-location">${sanitize(proj.projYear) || ''}</span>
                             </div>
                             ${techDisplay} ${links}</p>
                             ${createListHTML(proj.projDesc)}
                        </div>`;
                });
                html += `</section>`;
            }

            // Skills
            if (data.languages || data.frameworks || data.databases || data.tools) {
                html += `<section class="resume-section"><h2>Technical Skills</h2><div class="skills-section">`;
                if (data.languages) html += `<p><strong>Languages:</strong> ${sanitize(data.languages)}</p>`;
                if (data.frameworks) html += `<p><strong>Frameworks/Libraries:</strong> ${sanitize(data.frameworks)}</p>`;
                if (data.databases) html += `<p><strong>Databases:</strong> ${sanitize(data.databases)}</p>`;
                if (data.tools) html += `<p><strong>Developer Tools:</strong> ${sanitize(data.tools)}</p>`;
                html += `</div></section>`;
            }

            // Awards
            if (data.awards) {
                const awardsList = data.awards.split('\n').map(a => sanitize(a.trim())).filter(a => a);
                if (awardsList.length > 0) {
                    html += `<section class="resume-section"><h2>Awards</h2><ul>`; // Use direct ul for these sections
                    awardsList.forEach(award => html += `<li>${award}</li>`);
                    html += `</ul></section>`;
                }
            }

            // Activities
            if (data.activities.length > 0) {
                html += `<section class="resume-section"><h2>Activities</h2>`;
                data.activities.forEach(act => {
                    html += `
                        <div class="resume-entry">
                            <div class="title-line">
                                <h3>${sanitize(act.actTitle) || 'Role/Title'}</h3>
                                <span class="date-location">${sanitize(act.actStartDate) || ''} ${act.actEndDate ? ` - ${sanitize(act.actEndDate)}` : ''}</span>
                            </div>
                            <p class="institution"><i class="fas fa-users"></i>${sanitize(act.actOrg) || 'Organization'}</p>
                            ${createListHTML(act.actDesc)}
                        </div>`;
                });
                html += `</section>`;
            }

            // Certifications
            if (data.certifications) {
                const certList = data.certifications.split('\n').map(c => sanitize(c.trim())).filter(c => c);
                if (certList.length > 0) {
                    html += `<section class="resume-section"><h2>Certifications</h2><ul>`; // Use direct ul
                    certList.forEach(cert => html += `<li>${cert}</li>`);
                    html += `</ul></section>`;
                }
            }

            html += `</div>`; // Close resume-container

            // Display generated resume
            generatedOutputContainer.innerHTML = html;
            showView(generatedOutputArea); // Show the area containing the output and download button
        });

        // --- PDF Download ---
        downloadPdfBtn.addEventListener('click', () => {
            const element = generatedOutputContainer.querySelector('.resume-container'); // Target the generated resume specifically
            if (!element) {
                alert("Error: Could not find generated resume content.");
                return;
            }

            const opt = {
                margin: [0.5, 0.5, 0.5, 0.5], // Margins in inches [top, left, bottom, right]
                filename: `${generatedFullName.replace(/ /g, '_')}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true, logging: false }, // Increase scale for better resolution
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' },
                pagebreak: { mode: ['avoid-all', 'css', 'legacy'] } // Modes to try for page breaks
            };

            // Disable button during generation
            downloadPdfBtn.disabled = true;
            downloadPdfBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';

            html2pdf().from(element).set(opt).save()
                .then(() => {
                    // Re-enable button
                    downloadPdfBtn.disabled = false;
                    downloadPdfBtn.innerHTML = '<i class="fas fa-file-pdf"></i> Download PDF';
                })
                .catch(err => {
                    console.error("Error generating PDF:", err);
                    alert("Sorry, there was an error generating the PDF.");
                    // Re-enable button
                    downloadPdfBtn.disabled = false;
                    downloadPdfBtn.innerHTML = '<i class="fas fa-file-pdf"></i> Download PDF';
                });
        });

        // Initial state: Show sample
        showView(sampleViewer);

    </script>
</body>

</html>